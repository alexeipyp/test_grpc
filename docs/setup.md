# Руководство по запуску приложения


## Содержание

- [Формирование конфигурации](#config)
- [Запуск приложения в качестве systemd сервиса](#systemd)
- [Запуск приложения локально через бинарный файл](#binary)
- [Запуск приложения локально из исходников](#source)


<div id="config"></a>

## Формирование конфигурации

* Сформировать файл конфигурации с расширением .json, руководствуясь [документацией по файлу конфигурации](config.md)
* Поместить файл конфигурации в папку config

Также, для запуска приложения требуется установить значения переменным окружения:

* CONFIG_PATH - путь к файлу конфигурации
* LOGS_PATH - путь к директории с лог-файлами

<div id="systemd"></a>

## Запуск приложения в качестве systemd сервиса

Выполнить команду: make install-systemd-service

Изменяемые параметры:
* CONFIG_DIR - путь к директории с файлом конфигурации
    * По умолчанию: /etc/$(SERVICE_NAME)
* CONFIG_FILENAME - имя файла конфигурации
    * По умолчанию: config.json
* INSTALL_PATH - путь установки исполняемого файла приложения
    * По умолчанию: /usr/local/bin
* LOGS_DIR - путь к директории с лог-файлами
    * По умолчанию: /var/log/$(SERVICE_NAME)/

Пример выполнения команды с параметрами:
* make install-systemd-service LOGS_PATH=/var/log/logsarehere

Значения переменных окружения устанавливаются на основе вышеуказанных параметров:
* CONFIG_PATH = CONFIG_DIR + / + CONFIG_FILENAME
* LOGS_PATH = LOGS_DIR

Запуск сервиса производится через команду: systemctl start test_grpc


<div id="binary"></a>

## Запуск приложения локально через бинарный файл

Выполнить команду: make build-and-run

Изменяемые параметры:
* CONFIG_PATH - путь к файлу конфигурации
    * По умолчанию: ./config/config.json
* LOGS_PATH - путь к директории с лог-файлами
    * По умолчанию: ./logs/

Пример выполнения команды с параметрами:
* make build-and-run LOGS_PATH=./mylogs/ CONFIG_PATH=./config/myconfig.json

Значения переменных окружения устанавливаются равными одноименным параметрам


<div id="source"></a>

## Запуск приложения локально из исходников

Выполнить команду: make run-from-source

Изменяемые параметры:
* CONFIG_PATH - путь к файлу конфигурации
    * По умолчанию: ./config/config.json
* LOGS_PATH - путь к директории с лог-файлами
    * По умолчанию: ./logs/

Пример выполнения команды с параметрами:
* make run-from-source LOGS_PATH=./mylogs/ CONFIG_PATH=./config/myconfig.json

Значения переменных окружения устанавливаются равными одноименным параметрам